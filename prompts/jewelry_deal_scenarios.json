{
  "description": "Sample scenarios for gold and jewelry transactions. Context (balances, accounts) is provided by the system at runtime; user_input is what the user says.",
  "transaction_types_reference": [
    "Sell Raw Gold",
    "Buy Raw Gold",
    "Receive Money",
    "Send Money",
    "Receive Raw Gold",
    "Give Raw Gold",
    "Receive Jewelry",
    "Give Jewelry"
  ],
  "scenarios": [
    {
      "id": "debt_settlement_gold_and_cash",
      "title": "Gold debt settlement: part gold, part cash",
      "context": {
        "person": "Mr. Zamani",
        "person_role": "Collaborator",
        "prior_state": "We owe Mr. Zamani 12g gold (his balance: +12g gold). Context is provided by the system from the database, not by the user."
      },
      "user_input": "I gave 8g gold to Mr. Zamani and paid $2000 for 4g from the haspa account",
      "reasoning": "User settles the full 12g debt: (1) 8g by giving physical gold → Give Raw Gold 8g. (2) Remaining 4g in cash → Buy Raw Gold 4g price 2000, and Send Money 2000 from haspa. Order: give gold, buy gold (settlement), send money.",
      "expected_transaction_count": 3,
      "expected_output": [
        {
          "customer_id": "<Zamani_customer_id>",
          "transaction_type": "Give Raw Gold",
          "details": { "weight_grams": 8, "purity": 18 },
          "notes": "8g gold given to Mr. Zamani; part of 12g debt settlement"
        },
        {
          "customer_id": "<Zamani_customer_id>",
          "transaction_type": "Buy Raw Gold",
          "details": { "purity": 18, "weight_grams": 4, "price": 2000 },
          "notes": "4g debt settled in cash; no physical gold received"
        },
        {
          "customer_id": "<Zamani_customer_id>",
          "transaction_type": "Send Money",
          "details": { "amount": 2000, "bank_account_id": "<haspa_account_id>" },
          "notes": "$2000 paid from Haspa account for 4g settlement"
        }
      ],
      "outcome": "Mr. Zamani's gold balance becomes zero (12 − 8 − 4).",
      "rules_for_ai": [
        "When user says \"I gave X g\" and \"Y dollars for Z g from account <account> paid\", output 3 transactions: Give Raw Gold X g, Buy Raw Gold Z g price Y, Send Money Y from that account.",
        "Verify with system context: X + Z = debt amount. Map person and account names to IDs from context."
      ]
    },
    {
      "id": "jewelry_sale_settle_debt_via_collaborator",
      "title": "Jewelry sale to end customer; customer pays collaborator; we settle gold debt",
      "context": {
        "person_collaborator": "Mr. Zamani",
        "prior_state": "We owe Mr. Zamani 12g gold (his balance: +12g gold). After settling 8g, remaining = 4g.",
        "end_user": "End customer who buys the jewelry.",
        "jewelry": "Jewelry item #12 (use jewelry_code from context, e.g. \"12\" or \"ITEM-12\")."
      },
      "user_input": "We sold jewelry item #12 to an end customer for $3000 and they paid it to Mr. Zamani for 8g gold",
      "reasoning": "Five logical steps: (1) Sell item to end customer (2) Deliver item to customer (3) Receive 3000 from customer (4) Buy 8g from Mr. Zamani — settle 8g debt (5) Pay 3000 to Mr. Zamani. In API, \"sale\" and \"deliver item\" are one transaction: Give Jewelry. So 4 API transactions: Give Jewelry, Receive Money (3000 from customer), Buy Raw Gold (8g from Zamani, price 3000), Send Money (3000 to Zamani).",
      "expected_transaction_count": 4,
      "logical_steps": [
        "1. Sell item to end customer",
        "2. Deliver item to customer",
        "3. Receive $3000 from customer",
        "4. Buy 8g from Mr. Zamani",
        "5. Pay $3000 to Mr. Zamani"
      ],
      "api_note": "Steps 1 and 2 map to one Give Jewelry transaction in the API. So 5 logical steps → 4 API transactions.",
      "expected_output": [
        {
          "customer_id": "<end_user_customer_id>",
          "transaction_type": "Give Jewelry",
          "details": { "jewelry_code": "<jewelry_code_item_12>" },
          "notes": "Jewelry item #12 sold and delivered to end customer"
        },
        {
          "customer_id": "<end_user_customer_id>",
          "transaction_type": "Receive Money",
          "details": { "amount": 3000, "bank_account_id": "<account_where_end_user_paid>" },
          "notes": "$3000 received from end customer (sale payment)"
        },
        {
          "customer_id": "<Zamani_customer_id>",
          "transaction_type": "Buy Raw Gold",
          "details": { "purity": 18, "weight_grams": 8, "price": 3000 },
          "notes": "8g bought from Mr. Zamani (settle 8g debt; no physical gold received)"
        },
        {
          "customer_id": "<Zamani_customer_id>",
          "transaction_type": "Send Money",
          "details": { "amount": 3000, "bank_account_id": "<account_used_to_pay_Zamani>" },
          "notes": "$3000 paid to Mr. Zamani for 8g settlement"
        }
      ],
      "outcome": "Jewelry item #12 sold (removed from our inventory). We owed Mr. Zamani 12g; we settled 8g with a $3000 payment. Mr. Zamani's gold balance with us: 12 − 8 = 4g.",
      "rules_for_ai": [
        "When user says \"We sold jewelry item X to end customer for Y dollars and they paid [collaborator] for Z g gold\", output in order: (1) Give Jewelry (item X to end customer); (2) Receive Money (amount Y from customer); (3) Buy Raw Gold (Z g from collaborator, price Y); (4) Send Money (amount Y to collaborator).",
        "From context: end user → customer_id; collaborator (e.g. Mr. Zamani) → customer_id; item \"#12\" → jewelry_code; bank accounts from context.",
        "After this deal, debt to collaborator = N − Z g. Here: 12 − 8 = 4g owed to Mr. Zamani."
      ]
    },
    {
      "id": "triangular_settlement_gold_on_our_behalf",
      "title": "Third party gave gold on our behalf (triangular settlement)",
      "context": {
        "we_owe": "We owe Mr. Zamani 10g gold (his balance: +10g).",
        "owes_us": "Mr. Talebi owes us 8g gold (his balance with us: −8g).",
        "note": "Context is from the system."
      },
      "user_input": "Mr. Talebi gave 8g to Mr. Zamani on our behalf",
      "reasoning": "Talebi gave 8g to Zamani on our behalf: we effectively (1) receive 8g from Talebi (his debt to us is settled) and (2) give 8g to Zamani (part of our debt to him is settled). So 2 transactions: Receive Raw Gold 8g from Talebi, then Give Raw Gold 8g to Zamani.",
      "expected_transaction_count": 2,
      "logical_steps": [
        "1. Receive 8g from Mr. Talebi (Talebi's debt to us settled)",
        "2. Give 8g to Mr. Zamani (part of our debt to him settled)"
      ],
      "expected_output": [
        {
          "customer_id": "<Talebi_customer_id>",
          "transaction_type": "Receive Raw Gold",
          "details": { "weight_grams": 8, "purity": 18 },
          "notes": "Mr. Talebi gave 8g on our behalf; we received 8g from Mr. Talebi (his debt to us settled)"
        },
        {
          "customer_id": "<Zamani_customer_id>",
          "transaction_type": "Give Raw Gold",
          "details": { "weight_grams": 8, "purity": 18 },
          "notes": "8g given to Mr. Zamani on our behalf (Talebi gave to him; part of our debt settled)"
        }
      ],
      "outcome": "Settled with Mr. Talebi (his 8g debt to us is zero). We now owe Mr. Zamani only 2g (10 − 8 = 2).",
      "rules_for_ai": [
        "When user says \"[Person A] gave X g to [Person B] on our behalf\", output 2 transactions in order: (1) Receive Raw Gold X g from Person A; (2) Give Raw Gold X g to Person B.",
        "From context: we owe B, N g; A owes us M g. After this deal: A's balance with us = 0 (if M = X); we owe B only N − X g.",
        "Map person names to customer_id from context. If purity not given, use default (e.g. 18)."
      ]
    }
  ]
}
